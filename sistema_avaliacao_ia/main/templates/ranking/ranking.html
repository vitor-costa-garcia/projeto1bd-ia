{% extends "base.html" %}
{% load static %}

{% block title %}Rankings - Predicto{% endblock %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'css/ranking.css' %}">
{% endblock %}

{% block content %}
    <h1>Ranking Global</h1>
    
    <div class="filter-bar">
        <a href="?sort=gold" class="btn-filter {% if current_sort == 'gold' %}active{% endif %}">
            Por Medalhas (Padrão)
        </a>
        <a href="?sort=money" class="btn-filter {% if current_sort == 'money' %}active{% endif %}">
            Por Dinheiro
        </a>
        <a href="?sort=comps" class="btn-filter {% if current_sort == 'comps' %}active{% endif %}">
            Mais Ativos
        </a>
        <a href="?sort=name" class="btn-filter {% if current_sort == 'name' %}active{% endif %}">
            Nome (A-Z)
        </a>
    </div>

    <table>
        <thead>
            <tr>
                <th>#</th>
                <th>Usuário</th>
                <th>Pontos</th>
                <th>Medalhas</th>
                <th>Ganhos (R$)</th>
                <th>Competições</th>
            </tr>
        </thead>
        <tbody>
            {% for user in rankinglist %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>
                    <strong>{{ user.1 }}</strong>
                </td>
                <td>
                    <span class="points-placeholder">Em breve (TBD)</span>
                </td>
                <td>
                    {% if user.2 > 0 %}<span class="medal-icon gold">●</span>{{ user.2 }}{% endif %}
                    {% if user.3 > 0 %}<span class="medal-icon silver">●</span>{{ user.3 }}{% endif %}
                    {% if user.4 > 0 %}<span class="medal-icon bronze">●</span>{{ user.4 }}{% endif %}
                    {% if user.2 == 0 and user.3 == 0 and user.4 == 0 %}-{% endif %}
                </td>
                <td>
                    {% if user.5 > 0 %}
                        R$ {{ user.5|floatformat:2 }}
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td>{{ user.6 }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}