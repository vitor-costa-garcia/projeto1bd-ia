{% extends "base.html" %}
{% load static %}

{% block title %}Perfil - Predicto{% endblock %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'css/dialog.css' %}">
{% endblock %}

{% block content %}
    <h1>Perfil do Usuário</h1>
    
    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li style="color: {% if message.tags == 'success' %}green{% else %}red{% endif %};">
                    {{ message }}
                </li>
            {% endfor %}
        </ul>
        <hr>
    {% endif %}

    <p>Medalhas:</p>
    <p>Ouro: {{ user_prizes.0.1 }} Prata: {{ user_prizes.1.1 }} Bronze {{ user_prizes.2.1 }}</p>
    <p>Premiações em dinheiro: {{ user_prizes.3.1 }}</p>
    <button>Histórico competições</button>
    <button>Editar</button>

    <hr>
    
    {% if is_organizer %}
        <p><strong>Status:</strong> Você já é um Organizador.</p>
    {% else %}
        <button type="button" id="show-dialog-btn">Tornar-se um Organizador</button>

        <dialog id="organizer-dialog">
            <h2>Registrar como Organizador</h2>
            <form method="post" action="{% url 'main:become-organizer' %}" class="dialog-form-container">
                {% csrf_token %}
                <label>
                    CPF:
                    <input type="text" name="cpf" required placeholder="000.000.000-00" maxlength="14">
                </label>
                <div class="dialog-actions">
                    <button type="button" id="close-dialog-btn" class="btn-secondary">Cancelar</button>
                    <button type="submit">Registrar</button>
                </div>
            </form>
        </dialog>
    {% endif %}
{% endblock %}

{% block extra_js %}
    {% if not is_organizer %}
        <script src="{% static 'js/dialog.js' %}"></script>
    {% endif %}
{% endblock %}